<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>eelテスト</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <h2>eelテスト</h2>

    <!--入力FORM-->
    <form id="form1" action="#">
      <input type="text" id="input_message">
      <input type="button" id="search" value="送信">
    </form>
    <div id="output_message">
      <textarea id="resultTextarea" class="log_textArea" readonly></textarea>
    </div>
    <script type="text/javascript" src="/eel.js"></script>
    <script type="text/javascript">
      var search = document.getElementById("search");
      // ↓アロー関数という、(他に無名関数, 外部関数の書き方あり)
      search.addEventListener("click", () => {
  
        var input_message = document.getElementById("input_message").value; 
        console.log("これはどう？");
        if (input_message == "") {
          alert("入力が空です！");
        } else {
          eel.kimetsu_search(input_message)();

        }
      });

      eel.expose(ask_if_append);
      function ask_if_append(text) {
        var result_append = window.confirm(text + "をファイルに登録しますか？");
        if (result_append) {
            eel.add_to_kimetsu(text);
        }
      }

      eel.expose(display_result);
      function display_result(text) {
        var result = document.getElementById("resultTextarea").value;
        document.getElementById("resultTextarea").value += "\n" + text;
      }

    </script>
  </body>
</html>